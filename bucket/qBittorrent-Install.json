{
    "version": "4.2.1",
    "description": "qBittorrent. Free and reliable P2P Bittorent client",
    "homepage": "https://www.qbittorrent.org",
    "license": {
        "identifier": "GPL-2.0-only",
        "url": "https://github.com/qbittorrent/qBittorrent/blob/master/COPYING"
    },
    "architecture": {
        "64bit": {
            "url": "https://downloads.sourceforge.net/project/qbittorrent/qbittorrent-win32/qbittorrent-4.2.1/qbittorrent_4.2.1_x64_setup.exe#/setup.exe",
            "hash": "f826a56d9deca1d673c64e36e7070f01b02de842e0a627b2f12bf28d864fb061"
        },
        "32bit": {
            "url": "https://downloads.sourceforge.net/project/qbittorrent/qbittorrent-win32/qbittorrent-4.2.1/qbittorrent_4.2.1_setup.exe#/setup.exe",
            "hash": "6fd8ae6bb54314f9de01bc4427d0da7e3a1c886adb802b679db9c1abc4ef9b94"
        }
    },
    "installer": {
        "script": [
            "$programname = \"qbittorrent*\"",
            "if(!(Get-Package -Provider Programs -IncludeWindowsInstaller -Name \"$programname\" -RequiredVersion $version -ErrorAction SilentlyContinue))",
            "{",
            "Invoke-ExternalCommand \"$dir\\setup.exe\" -ArgumentList @('/S') -RunAs | Out-Null",
            "}",
            "if(!(Get-Package -Provider Programs -IncludeWindowsInstaller -Name \"$programname\" -RequiredVersion $version -ErrorAction SilentlyContinue))",
            "{",
            "exit 1",
            "}",
            "Remove-Item \"$dir\\setup.exe\" -Force"
        ]
    },
    "post_install": [
        "$CommonDesktopPath = [Environment]::GetFolderPath(\"CommonDesktopDirectory\")",
        "if (Test-Path \"$CommonDesktopPath\\qbittorrent.lnk\") {Remove-Item \"$CommonDesktopPath\\qbittorrent.lnk\" -Force}"
    ],
    "uninstaller": {
        "script": [
            "taskkill /F /IM qbittorrent.exe /FI 'status eq running'",
            "$ProgramFilesPath = [Environment]::GetFolderPath(\"ProgramFiles\")",
            "Invoke-ExternalCommand \"$ProgramFilesPath\\qBittorrent\\uninst.exe\" -ArgumentList @('/S') -RunAs | Out-Null"
        ]
    },
    "checkver": {
        "url": "https://www.qbittorrent.org/download.php",
        "regex": "Latest:\\s+v([\\d.]+)"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://downloads.sourceforge.net/project/qbittorrent/qbittorrent-win32/qbittorrent-$version/qbittorrent_$version_x64_setup.exe#/cosi.7z",
                "hash": {
                    "url": "https://www.qbittorrent.org/download.php",
                    "regex": "(?sm)td>64-bit Installer.*?<code>$sha256</code>"
                }
            },
            "32bit": {
                "url": "https://downloads.sourceforge.net/project/qbittorrent/qbittorrent-win32/qbittorrent-$version/qbittorrent_$version_setup.exe#/cosi.7z",
                "hash": {
                    "url": "https://www.qbittorrent.org/download.php",
                    "regex": "(?sm)td>32-bit Installer.*?<code>$sha256</code>"
                }
            }
        }
    }
}
